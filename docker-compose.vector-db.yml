# ============================================
# üê≥ Docker Compose - Vector Database
# ============================================
# Qdrant vector database for semantic code search

version: '3.8'

services:
  qdrant:
    image: qdrant/qdrant:latest
    container_name: oqool-qdrant
    ports:
      - "6333:6333"  # HTTP API
      - "6334:6334"  # gRPC API
    volumes:
      - qdrant_storage:/qdrant/storage
    environment:
      # Optional: Set API key for security
      # QDRANT__SERVICE__API_KEY: "your-secret-key-here"
      QDRANT__LOG_LEVEL: INFO
    restart: unless-stopped
    networks:
      - oqool-network

  # Optional: Qdrant Web UI
  qdrant-web-ui:
    image: qdrant/qdrant-web-ui:latest
    container_name: oqool-qdrant-ui
    ports:
      - "3001:80"
    environment:
      - QDRANT_URL=http://qdrant:6333
    depends_on:
      - qdrant
    restart: unless-stopped
    networks:
      - oqool-network

volumes:
  qdrant_storage:
    driver: local

networks:
  oqool-network:
    driver: bridge

# ============================================
# Usage:
# ============================================
#
# Start Qdrant:
#   docker-compose -f docker-compose.vector-db.yml up -d
#
# Stop Qdrant:
#   docker-compose -f docker-compose.vector-db.yml down
#
# View logs:
#   docker-compose -f docker-compose.vector-db.yml logs -f
#
# Access:
#   - Qdrant API: http://localhost:6333
#   - Qdrant Web UI: http://localhost:3001
#   - Dashboard: http://localhost:6333/dashboard
#
# ============================================
